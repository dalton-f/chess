// const STARTING_FEN = "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR";

const PIECE_COLORS = {
  white: 0,
  black: 2,
};

// Set up multiple definitions here so that we avoid using magic numbers + the code is slightly easier to understand
const PIECES = {
  empty: 0,
  outOfBounds: -1,

  whitePawn: 1,
  whiteKnight: 2,
  whiteBishop: 3,
  whiteRook: 4,
  whiteQueen: 5,
  whiteKing: 6,

  blackPawn: 33,
  blackKnight: 34,
  blackBishop: 35,
  blackRook: 36,
  blackQueen: 37,
  blackKing: 38,
};

// Ensure both files + ranks are zero indexed for logic
const FILES = {
  a: 0,
  b: 1,
  c: 2,
  d: 3,
  e: 4,
  f: 5,
  g: 6,
  h: 7,
};

const RANKS = {
  1: 7,
  2: 6,
  3: 5,
  4: 4,
  5: 3,
  6: 2,
  7: 1,
  8: 0,
};

// Set up constants for the bitwise masks so they are easier to use alongside the above piece notation
const PIECE_COLOUR_MASK = 0b11;
const PIECE_TYPE_MASK = 0b1111;

let colorToMove = PIECE_COLORS.white;

// a8 = 21, a1 = 91, h8 = 28, h1 = 98
const FetchIndexFromCoordinate = (coordinate) => {
  const [file, rank] = coordinate.split("");

  return 21 + FILES[file] + 10 * RANKS[rank];
};

const ExtractPieceData = (piece) => {
  const pieceColour = (piece >> 4) & PIECE_COLOUR_MASK;

  const pieceType = piece & PIECE_TYPE_MASK;

  return [pieceColour, pieceType];
};

const LoadPositionFromFEN = (fen) => {
  // If a non-string value is passed in, obviously ignore it
  if (typeof fen !== "string") {
    throw new Error(
      "Forsyth-Edwards Notation must be represented with a string",
    );
  }

  // Set up a FEN specific mapping of pieces directly to the predetermined values to save time on additional checks
  const pieceTypeFromSymbol = {
    p: PIECES.blackPawn,
    n: PIECES.blackKnight,
    b: PIECES.blackBishop,
    r: PIECES.blackRook,
    q: PIECES.blackQueen,
    k: PIECES.blackKing,

    P: PIECES.whitePawn,
    N: PIECES.whiteKnight,
    B: PIECES.whiteBishop,
    R: PIECES.whiteRook,
    Q: PIECES.whiteQueen,
    K: PIECES.whiteKing,
  };

  // A FEN string always describes a position starting from the 8th rank
  const ranks = fen.split("/");

  // Using 120 instead of 64 to allow for out of bound areas to be defined
  const board = new Array(120).fill(PIECES.outOfBounds);

  // Start population from the first rank as we reversed the FEN
  let index = FetchIndexFromCoordinate("a8");

  for (const rank of ranks) {
    for (const char of rank) {
      // If the value is a number
      if (!isNaN(char)) {
        // Fill the board from index to index + char with PIECES.empty (0)
        board.fill(PIECES.empty, index, index + parseFloat(char));

        // Increase the index by the number
        index += parseFloat(char);
      } else {
        // Add the correct piece to the corresponding index
        board[index] = pieceTypeFromSymbol[char];

        index++;
      }
    }

    // Move down to the next rank
    index += 2;
  }

  return board;
};

const InitalizeGraphicalBoard = (board) => {
  const RANK_COUNT = 8;
  const FILE_COUNT = 8;

  const boardElement = document.getElementById("board");

  // Mapping the numerical value to an svg
  const pieceMapping = {
    1: '<svg data-piece="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><path fill="#F6F6F6" d="M88.313 37.61c4.57 3.766 7.265 8.11 8.023 14.003.096 6.67-.987 10.63-4.336 16.387v2c1.79 1.363 1.79 1.363 4 2.625l2.25 1.352L100 75c-.481 4.814-.8 7.602-3 12h-9c3.371 10.623 9.299 17.258 18.246 23.684 5.437 4.08 7.1 8.945 8.754 15.316v10H35c0-11.075.651-17.266 8.04-25.168 1.919-1.793 3.883-3.311 6.023-4.832C55.93 101.075 59.45 94.934 62 87h-9c-4.008-8.517-4.008-8.517-3-12 2.505-1.981 5.176-3.519 8-5l-.875-2.188L56 65l-1.047-2.344c-2.073-5.777-1.908-12.35.61-17.968 3.086-5.293 7.163-8.701 12.75-11.126 7.568-1.154 13.66-.4 20 4.047Z"/><path fill="#F7F7F7" d="M66 88c3.415 2.86 6.757 5.74 9.938 8.86 7.68 7.467 15.318 13.717 26.062 16.14 4.826 1.609 6.04 5.126 8.25 9.438C111 125 111 125 111 132H39c0-7.419.617-11.153 5-17 2.662-2.217 5.367-4.239 8.186-6.243C57.44 104.927 60.309 100.84 63 95l1.016-2.184C64.718 91.23 65.367 89.617 66 88Z"/><path fill="#4D4D4D" d="M88.313 37.61c4.57 3.766 7.265 8.11 8.023 14.003.096 6.67-.987 10.63-4.336 16.387v2c1.79 1.363 1.79 1.363 4 2.625l2.25 1.352L100 75c-.481 4.814-.8 7.602-3 12h-9c3.371 10.623 9.299 17.258 18.246 23.684 5.437 4.08 7.1 8.945 8.754 15.316v10H35c0-11.075.651-17.266 8.04-25.168 1.919-1.793 3.883-3.311 6.023-4.832C55.93 101.075 59.45 94.934 62 87h-9c-4.008-8.517-4.008-8.517-3-12 2.505-1.981 5.176-3.519 8-5l-.875-2.188L56 65l-1.047-2.344c-2.073-5.777-1.908-12.35.61-17.968 3.086-5.293 7.163-8.701 12.75-11.126 7.568-1.154 13.66-.4 20 4.047Zm-29.036 7.699C56.901 50.315 57.27 55.597 58 61c1.661 3.673 4.16 6.16 7 9l-11 7c.445 4.63.445 4.63 2 6 1.686.072 3.375.084 5.063.063l2.785-.028L66 83c-2.545 12.995-6.517 20.528-17.301 28.244-5.021 3.712-8.16 7.665-9.699 13.756v7h72c0-7.854-1.143-11.638-6.125-17.5-1.706-1.483-3.443-2.932-5.242-4.3-5.524-4.221-9.535-7.936-12.633-14.2l-1.25-2.5C84.706 90.019 84.368 86.615 84 83l2.117.105 2.758.082 2.742.106L94 83c2.277-2.815 2.277-2.815 2-6-2.455-1.928-2.455-1.928-5.5-3.688l-3.094-1.886L85 70l1.277-1.645 1.66-2.168 1.653-2.144C92.747 59.469 92.69 54.348 92 49c-1.924-5.065-5.07-8.998-9.988-11.367-9.074-2.854-17.074.09-22.735 7.676Z"/><path fill="#D2D2D2" d="M66 83h18l1 8c3.437 9.332 8.81 15.54 17 21-2.745 1.091-3.89 1.037-6.734.066-6.068-3.026-10.8-6.045-15.391-11.046-1.934-2.083-3.97-3.92-6.125-5.77l-1.984-1.727a758.268 758.268 0 0 0-4.266-3.648C66 88 66 88 66 83ZM86 41c3.36 3.136 5.657 5.657 6.336 10.297C92.432 57.304 91.668 62.099 88 67c-2.255 2.129-3.473 2.94-6.578 3.293l-2.672-.106-2.703-.082L74 70a97.56 97.56 0 0 1 7.063-4.938C84.844 62.407 86.546 60.36 88 56c.277-5.538-.25-9.751-2-15Z"/><path fill="#CFCFCF" d="M86 72c3.594 1.335 6.755 2.96 10 5-.875 4.875-.875 4.875-2 6a91.472 91.472 0 0 1-5.063.063l-2.785-.028L84 83l2-3c.24-2.057.24-2.057.125-4.188L86 72Z"/></svg>',
    2: '<svg data-piece="2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><path fill="#F6F6F6" d="M60.508 15.043c3.11 1.194 4.272 2.699 6.367 5.27 4.861 5.137 9.774 6.315 16.477 7.816 12.176 2.907 21.9 11.036 28.406 21.621 5.248 9.506 7.644 18.695 7.68 29.563l.011 2.567c-.172 9.746-2.682 18.831-5.449 28.12l2.887 1.844c4.533 3.14 5.792 5.872 7.113 11.156v13H35c0-17.952 0-17.952 4.465-22.488 2.05-1.78 4.104-3.297 6.535-4.512.88-1.812.88-1.812 1.688-4 3.965-9.108 10.266-15.146 17.868-21.283 2.63-2.126 4.55-3.876 6.444-6.717v-4l-1.574 1.242c-8.036 6.21-8.036 6.21-13.332 7.067-4.279.751-4.279.751-7.649 3.34a66.917 66.917 0 0 0-2.437 3.792C46 90 46 90 44 91c-8.043.075-14.568-1.825-20.5-7.313-2.093-3.75-2.258-5.412-1.5-9.687 2.49-4.768 5.577-9.114 8.813-13.402 4.052-5.436 6.579-10.86 8.909-17.182C41.845 37.886 44.712 34.012 49 30c2.8-2.8 3.099-5.808 4.023-9.59 1.532-3.78 3.331-5.438 7.485-5.367Z"/><path fill="#4C4C4C" d="M60.508 15.043c3.11 1.194 4.272 2.699 6.367 5.27 4.861 5.137 9.774 6.315 16.477 7.816 12.176 2.907 21.9 11.036 28.406 21.621 5.248 9.506 7.644 18.695 7.68 29.563l.011 2.567c-.172 9.746-2.682 18.831-5.449 28.12l2.887 1.844c4.533 3.14 5.792 5.872 7.113 11.156v13H35c0-17.952 0-17.952 4.465-22.488 2.05-1.78 4.104-3.297 6.535-4.512.88-1.812.88-1.812 1.688-4 3.965-9.108 10.266-15.146 17.868-21.283 2.63-2.126 4.55-3.876 6.444-6.717v-4l-1.574 1.242c-8.036 6.21-8.036 6.21-13.332 7.067-4.279.751-4.279.751-7.649 3.34a66.917 66.917 0 0 0-2.437 3.792C46 90 46 90 44 91c-8.043.075-14.568-1.825-20.5-7.313-2.093-3.75-2.258-5.412-1.5-9.687 2.49-4.768 5.577-9.114 8.813-13.402 4.052-5.436 6.579-10.86 8.909-17.182C41.845 37.886 44.712 34.012 49 30c2.8-2.8 3.099-5.808 4.023-9.59 1.532-3.78 3.331-5.438 7.485-5.367Zm-3.07 5.02c-1.724 1.984-1.724 1.984-1.813 5.25-.933 5.501-4.059 8.283-8.117 11.921-2.88 3.177-3.961 5.861-5.383 9.891-3.235 8.688-7.762 15.955-13.563 23.188-1.963 2.573-2.556 3.655-3.187 6.937.8 3.52 1.731 4.598 4.625 6.75 4.35 2.256 8.101 4.065 13 3 1.488-1.66 2.608-3.346 3.727-5.273C48.295 79.6 49.537 78.93 52 78c1.538-.218 3.08-.404 4.625-.563 5.873-1.052 9.094-4.238 13.246-8.343C72 67 72 67 75 65c1.279 3.837 1.77 8.03 1 12-2.915 5.296-6.914 8.865-11.375 12.813C56.648 96.978 56.648 96.978 51 106v3h59c4.912-18.42 9.42-37.94-.46-55.613-1.427-2.212-2.938-4.3-4.54-6.387l-1.75-2.625c-7.484-7.9-17.078-12.583-27.813-14-5.582-1.048-8.699-5.201-12.37-9.258L61 19c-2.04-.187-2.04-.187-3.563 1.063Z"/><path fill="#F7F7F7" d="m67.074 110.832 2.563-.01c1.78-.005 3.561-.007 5.342-.007 2.684-.002 5.367-.02 8.05-.04 26.495-.087 26.495-.087 33.971 5.225 4.63 4.939 3 8.48 3 16H39c0-12.897 0-12.897 4-17 7.504-4.185 15.7-4.156 24.074-4.168Z"/><path fill="#CFCFCF" d="M81 32c10.847 1.795 19.28 8.075 25.688 16.75 8.579 12.782 10.29 27.626 7.931 42.681-.957 4.598-2.248 9.078-3.619 13.569l-1 4-47-1v-1l2.092.099c13.152 1.055 13.152 1.055 24.814-3.45C91.633 100.496 92.812 97.387 94 94a132.571 132.571 0 0 1 3.75-5.688c6.082-9.607 7.22-17.904 6.25-29.312-.734-2.922-1.725-5.245-3-8-.38-1.657-.738-3.32-1-5h-2l-2.438-3.125C91.635 38.066 86.502 35.673 81 33v-1Z"/><path fill="#515151" d="M60.5 41.75C63 42 63 42 65 44c-.375 2.625-.375 2.625-1 5-1.456.363-2.915.715-4.375 1.063l-2.46.597C55 51 55 51 53 50c3.767-7.877 3.767-7.877 7.5-8.25Z"/><path fill="#D0D0D0" d="m79 55 2 1a724.846 724.846 0 0 1-.375 6.125c-.07 1.137-.14 2.274-.21 3.445-.41 3.384-1.225 6.246-2.415 9.43h-1l-.367-2.152-.508-2.785-.492-2.778L75 65l-2-1 6-9Z"/><path fill="#D1D1D1" d="M48 73c5.538.615 5.538.615 7.875 2.563L57 77l-1.793.41C48.765 79.165 46.363 81.25 43 87l-1-2c1.215-2.82 1.215-2.82 2.938-6.125l1.714-3.32L48 73Z"/></svg>',
    3: '<svg data-piece="3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><path fill="#4C4C4C" d="M84 17c2.373 3.236 2.593 6.069 2 10-1.335 2.246-2.836 4.335-4.344 6.469C73.654 45.699 71.772 60.704 71 75h7l-.105-2.133C77.547 60.192 79.853 46.72 87 36c10.458 4.66 17.277 16.207 21.375 26.438 4.41 13.384 2.812 27.01-3.375 39.562-1.24 2.108-2.547 4.028-4 6l2.012.48c5.623 1.486 9.284 2.775 12.988 7.52 2 4 2 4 2 20H29c0-10.345 0-10.345.75-14.25l.422-2.39c1.535-4.373 3.755-6.797 7.844-8.942l3.234-1.23 3.266-1.27L47 107l-1.207-1.652c-7.493-10.666-10.3-22.236-8.367-35.203 3.077-14.292 11.22-26.423 22.433-35.68 1.378-1.454 1.378-1.454 1.11-3.735l-.469-2.543C59.887 23.51 60.17 20.962 63 17c7.009-6.65 13.5-5.966 21 0Z"/><path fill="#F6F6F6" d="M78 17c2.5 2.25 2.5 2.25 4 5-.377 3.934-1.76 6.582-3.875 9.875C69.019 46.653 68.218 62.092 67 79h14l.078-3.41C81.46 64.103 82.346 52.294 88 42c8.775 3.646 13.187 13.77 16.871 21.922 3.363 9.17 2.984 19.804.129 29.078-5.455 11.218-5.455 11.218-10 15-1.915.408-1.915.408-4.1.452l-2.49.067-2.68.02-2.768.038c-1.935.02-3.869.03-5.803.034-2.951.014-5.898.081-8.848.15-1.881.013-3.762.022-5.643.028l-2.662.081c-3.588-.04-6.024-.079-8.881-2.382C45.428 99.973 41.449 91.687 41 83l-.223-2.86c-.733-15.715 6.776-27.109 16.848-38.453 3.05-3.31 6.14-6.557 9.375-9.687l-1.5-1.625C63.533 27.26 63.408 25.628 64 22c4.596-5.443 7.006-6.688 14-5Z"/><path fill="#F8F8F8" d="m73.813 110.813 2.125.001c28.152.066 28.152.066 36.062 6.186 2 3 2 3 2 15H34c0-13 0-13 3.25-16.75 9.568-6.788 25.366-4.455 36.563-4.438Z"/><path fill="#CCC" d="M98 53c4.853 4.243 7.223 11.012 8.813 17.125.875 13.426-.996 23.594-8.813 34.875l-1.113 1.64c-3.008 2.168-6.271 1.727-9.836 1.653l-2.341-.013a852.843 852.843 0 0 1-7.397-.093c-1.673-.015-3.346-.028-5.018-.04-4.099-.034-8.197-.085-12.295-.147v-1l3.586.027c9.977-.11 16.994-.692 24.414-8.027l2.012-1.926c7.542-7.89 10.166-16.619 10.175-27.324l.038-2.2c.013-5.163-.804-9.584-2.225-14.55Z"/><path fill="#CDCDCD" d="M78 18c2.063 1.688 2.063 1.688 4 4-.335 3.931-1.768 6.593-3.875 9.875C69.029 46.637 68.195 62.107 67 79h-2c-3.775-8.898-4.673-17.568-1.063-26.688 2.731-5.932 5.822-11.7 8.94-17.438C76 29.124 78.312 24.713 78 18Z"/></svg>',
    4: '<svg data-piece="4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><path fill="#4D4D4D" d="m75 23.875 3.063-.008c2.754.125 5.255.512 7.937 1.133.336 1.937.669 3.875 1 5.813l.563 3.269C88 37 88 37 88 40h4c.09-.905.09-.905.184-1.828l.254-2.422c.08-.789.162-1.578.246-2.39.292-2.184.737-4.237 1.316-6.36 1.477-.111 2.957-.187 4.438-.25l2.496-.14c4.418.562 8.09 2.448 12.066 4.39a837.345 837.345 0 0 1-.313 9.5l-.068 2.688C112.382 49.06 111.545 53.67 109 59l-3.25 2.125c-2.97 2.519-2.97 2.519-3.02 5.379.197 3.02.52 6 .933 8.997.56 4.153 1.018 8.316 1.493 12.479.268 2.32.543 4.638.826 6.956l.397 3.283.361 2.935c.27 2.964.304 5.871.26 8.846l2.188.188c3.728 1.077 5.304 2.897 7.812 5.812 2 4 2 4 2 20H31c0-18.351 0-18.351 4-23 2.985-2.257 4.25-3 8-3l.113-2.402c.547-9.704 1.633-19.3 2.87-28.94l.396-3.13.361-2.79c.282-2.972.488-5.757.26-8.738-1.466-1.238-2.94-2.47-4.479-3.617-3.967-3.607-4.68-9.45-5.033-14.54-.072-1.78-.13-3.561-.175-5.343l-.104-2.781c-.082-2.24-.151-4.479-.209-6.719 9.306-4.546 9.306-4.546 14.563-4.25l2.566.11L56 27c.339 1.415.67 2.832 1 4.25l.563 2.39C58 36 58 36 58 40h4c.09-1.247.09-1.247.184-2.52l.254-3.292c.08-1.08.162-2.158.246-3.27C63 28 63 28 64 25c3.725-.863 7.179-1.135 11-1.125Z"/><path fill="#F5F5F5" d="M98 64c1.445 9.93 2.89 19.862 4.188 29.813l.48 3.644c.36 3.832.332 7.694.332 11.543H47c.594-9.507 1.194-18.736 2.5-28.125l.395-2.953C50.522 73.267 51.19 68.627 52 64c15.643-2.517 30.357-2.517 46 0ZM67 28h15c2.06 6.178 2.171 9.658 2 16h11l.438-3.688c.39-3.139.886-6.22 1.562-9.312 1.625.141 3.25.288 4.875.438.905.08 1.81.162 2.742.246C107 32 107 32 109 33c.614 17.934.614 17.934-4 25-3.758 2.758-5.945 3.31-10.535 2.695-6.33-.71-12.537-.846-18.903-.82H72.26c-6.675.025-13.189.284-19.806 1.2C49.208 60.975 47.57 59.935 45 58c-4.338-7.9-4.162-16.2-4-25 2.9-1.659 4.916-2.236 8.25-2.125L53 31c1.278 4.713 2 8.043 2 13h11c-.03-2.29-.03-2.29-.063-4.625-.054-4.052.378-7.262 1.063-11.375Z"/><path fill="#F8F8F8" d="m62.469 110.832 2.418-.01c1.684-.005 3.368-.007 5.052-.007 2.526-.002 5.051-.02 7.577-.04 27.258-.099 27.258-.099 34.484 5.225 3 4 3 4 3 16H35c0-12 0-12 2.063-15.625 7.018-5.674 16.712-5.53 25.406-5.543Z"/><path fill="#D0D0D0" d="M67 62c10.555-.25 20.566.321 31 2 1.445 9.93 2.89 19.862 4.188 29.813l.48 3.644c.364 3.885.388 7.643.332 11.543l-9-1-.262-2.754C92.408 93.351 90.503 78.313 81 70c-4.419-2.78-8.89-4.882-14-6v-2Z"/><path fill="#CECECE" d="M105 32c2.063.438 2.063.438 4 1 .29 8.472.399 17.46-4 25-3.236 2.682-4.556 3.036-8.813 2.688L93 60l1.207-1.215c6.485-6.959 7.906-14.391 9.363-23.597C104 33 104 33 105 32Z"/></svg>',
    5: '<svg data-piece="5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><path fill="#F5F5F5" d="M67.813 18.414c3.354 3.532 5.064 6.74 5.382 11.621C73 32 73 32 71.438 35.437 69.486 40.276 70.46 43.168 72 48l.813 2.574c.702 2.153 1.43 4.292 2.187 6.426 1.98-2.969 3.027-5.516 4.188-8.875l1.105-3.117c.953-4.057.38-6.624-1.418-10.32-1.23-3.776-1.068-6.96.125-10.688 2.355-4.171 5.208-7.115 9.813-8.625 4.795-.838 8.941.36 13.187 2.625 3.547 3.547 4.871 6.292 5.25 11.313-.324 4.775-1.762 7.901-4.813 11.562C101 42 101 42 99 42l.494 1.688c.549 2.507.62 4.732.604 7.296l-.01 2.832-.025 2.934-.014 2.98c-.012 2.424-.028 4.847-.049 7.27l2.313-2.313C105 62 105 62 106.816 60.489c1.705-2.143 1.348-3.618 1.121-6.3-.15-4.917.739-7.402 4.063-11.188 3.09-2.987 5.724-3.748 10-4 4.395.694 7.02 1.635 9.875 5 3.109 4.389 3.838 7.654 3.125 13-1.556 3.967-3.404 6.603-7 9h-3l-1.05 3.434c-2.575 7.723-5.93 15.152-9.138 22.629l-1.982 4.646A6843.198 6843.198 0 0 1 108 108l3 2c1.206.892 2.393 1.81 3.563 2.75l1.816 1.422C121.818 120.305 120 128.35 120 136H31c0-17.803 0-17.803 4.43-22.523C38.047 111.119 39.41 110 43 110c-4.05-11.31-8.63-22.36-13.392-33.388l-1.413-3.292-1.28-2.96C26 68 26 68 26 66l-1.688-.188C20.517 64.48 17.788 61.578 16 58c-.43-4.21-.47-7.887 1.188-11.813 2.894-3.493 5.348-5.75 9.75-7.062 4.793-.196 7.879 1.068 11.812 3.75C40.967 44.969 41.911 46.203 43 49c-.016 2.332-.016 2.332-.25 4.813-.124 4.187.49 6.145 3.25 9.312.977.982 1.97 1.95 3 2.875 1.608-1.608 1.203-3.397 1.281-5.621l.114-2.834.105-2.983c.069-1.936.141-3.872.219-5.808l.092-2.615C51 44 51 44 52 42l-1.75-.625C47.015 39.398 45.741 37.358 44 34c-.958-5.287-.048-9.53 3-14 6.43-5.172 13.826-7.037 20.813-1.586Z"/><path fill="#4C4C4C" d="M67.813 18.414c3.354 3.532 5.064 6.74 5.382 11.621C73 32 73 32 71.438 35.437 69.486 40.276 70.46 43.168 72 48l.813 2.574c.702 2.153 1.43 4.292 2.187 6.426 1.98-2.969 3.027-5.516 4.188-8.875l1.105-3.117c.953-4.057.38-6.624-1.418-10.32-1.23-3.776-1.068-6.96.125-10.688 2.355-4.171 5.208-7.115 9.813-8.625 4.795-.838 8.941.36 13.187 2.625 3.547 3.547 4.871 6.292 5.25 11.313-.324 4.775-1.762 7.901-4.813 11.562C101 42 101 42 99 42l.494 1.688c.549 2.507.62 4.732.604 7.296l-.01 2.832-.025 2.934-.014 2.98c-.012 2.424-.028 4.847-.049 7.27l2.313-2.313C105 62 105 62 106.816 60.489c1.705-2.143 1.348-3.618 1.121-6.3-.15-4.917.739-7.402 4.063-11.188 3.09-2.987 5.724-3.748 10-4 4.395.694 7.02 1.635 9.875 5 3.109 4.389 3.838 7.654 3.125 13-1.556 3.967-3.404 6.603-7 9h-3l-1.05 3.434c-2.575 7.723-5.93 15.152-9.138 22.629l-1.982 4.646A6843.198 6843.198 0 0 1 108 108l3 2c1.206.892 2.393 1.81 3.563 2.75l1.816 1.422C121.818 120.305 120 128.35 120 136H31c0-17.803 0-17.803 4.43-22.523C38.047 111.119 39.41 110 43 110c-4.05-11.31-8.63-22.36-13.392-33.388l-1.413-3.292-1.28-2.96C26 68 26 68 26 66l-1.688-.188C20.517 64.48 17.788 61.578 16 58c-.43-4.21-.47-7.887 1.188-11.813 2.894-3.493 5.348-5.75 9.75-7.062 4.793-.196 7.879 1.068 11.812 3.75C40.967 44.969 41.911 46.203 43 49c-.016 2.332-.016 2.332-.25 4.813-.124 4.187.49 6.145 3.25 9.312.977.982 1.97 1.95 3 2.875 1.608-1.608 1.203-3.397 1.281-5.621l.114-2.834.105-2.983c.069-1.936.141-3.872.219-5.808l.092-2.615C51 44 51 44 52 42l-1.75-.625C47.015 39.398 45.741 37.358 44 34c-.958-5.287-.048-9.53 3-14 6.43-5.172 13.826-7.037 20.813-1.586ZM49 24c-1.532 3.064-1.23 5.617-1 9 1.1 2.892 1.1 2.892 3 5l4 1-2 37-7.563-7.75-2.4-2.42-1.853-1.94-1.92-1.967C38 60 38 60 38.277 57.972L39 56c.475-4.352.524-6.27-2.063-9.875C33.388 43.557 31.38 42.923 27 43c-4.258 2.23-4.258 2.23-7 6-.493 5.755-.493 5.755 1.688 10.938C24.212 62.188 25.67 62.722 29 63l.537 1.662c2.595 7.927 5.666 15.626 8.823 23.343.681 1.674 1.354 3.352 2.019 5.033a619.212 619.212 0 0 0 2.957 7.306c.44 1.13.44 1.13.887 2.285.934 2.35.934 2.35 2.777 5.371 3.41 1.039 6.702 1.122 10.25 1.114h3.092l3.303-.016 3.408-.005c3.587-.005 7.173-.018 10.76-.03 2.434-.006 4.868-.01 7.302-.014 5.962-.011 11.923-.028 17.885-.049 2.832-6.358 5.628-12.73 8.375-19.125l1.193-2.755c1.81-4.207 3.573-8.41 5.139-12.714l.77-2.081a392.687 392.687 0 0 0 1.941-5.49c1.983-3.553 3.88-4.316 7.582-5.835 2.875-2.587 3.002-4.018 3.5-7.938-.143-3.323-.539-4.117-2.563-7-3.552-2.494-5.596-3.138-9.937-3.062-4.258 2.23-4.258 2.23-7 6a240.922 240.922 0 0 0 0 8c0 4 0 4-2.3 6.656a204.4 204.4 0 0 1-3.013 2.844c-3.162 2.996-6.198 5.898-8.687 9.5-1.016-7.846-1.316-15.659-1.563-23.563l-.13-3.923C96.2 45.343 96.099 42.17 96 39l2.418-.86c2.742-.91 2.742-.91 3.894-3.39.804-3.214 1.16-5.45.688-8.75-2.005-3.32-3.277-5.331-6.902-6.738-3.997-.76-5.778-.428-9.473 1.488-3.236 2.774-4.516 4.287-5 8.563.041 3.778.041 3.778 2.55 6.343 1.97 3.61 2.049 3.984 1.079 7.7a153.86 153.86 0 0 1-1.692 4.831l-.794 2.385C80.596 56.902 77.844 62.948 75 69c-1.48-4.05-2.94-8.107-4.382-12.17-.494-1.382-.992-2.76-1.496-4.138a540.337 540.337 0 0 1-2.13-5.958l-1.301-3.618C65 40 65 40 65.8 37.692L67 36c1.82-2.777 2-4.021 1.938-7.438C67.829 24.352 66.314 22.748 63 20c-6.098-3.05-9.687-.213-14 4Z"/><path fill="#F8F8F8" d="M71.523 110.684c2.708.003 5.414-.02 8.122-.045 26.392-.104 26.392-.104 33.2 5.848C117.667 122.11 116 122.247 116 132H35c0-12.667 0-12.667 4-17 9.476-5.517 21.937-4.341 32.523-4.316Z"/><path fill="#CECECE" d="M128 46c1.5 1 1.5 1 3 3 .522 4.62.67 6.859-1.688 10.875C127 62 127 62 124.523 62.785c-3.426 1.65-3.85 3.282-5.207 6.79l-1.363 3.443-1.39 3.67-1.455 3.705C113.723 83.923 112.36 87.46 111 91c-.93 2.374-1.867 4.744-2.81 7.113a794.696 794.696 0 0 0-2.069 5.262C105 106 105 106 103 109c-1.873.323-1.873.323-4.174.249l-2.609-.062-2.819-.113-2.883-.08c-3.047-.088-6.093-.197-9.14-.306-2.062-.064-4.125-.126-6.188-.186A2667.14 2667.14 0 0 1 60 108v-1l3.734-.008c12.791-.217 22.198-1.972 31.891-10.992 8.492-9.14 15.697-20.018 21.45-31.063C119.15 61 120.895 58.837 125 57h2c.575-3.735 1-7.213 1-11Z"/><path fill="#CDCDCD" d="M99 22c2.063 1.438 2.063 1.438 4 4 .387 4.49-.212 7.958-2.938 11.563C98 39 98 39 96 39v20c-2.449-3.673-2.707-6.715-3-11l-.234-3.168C92.45 37.205 93.138 33.812 98 28c.868-3.267.868-3.267 1-6Z"/><path fill="#CBCBCB" d="M64 21c2.924 2.358 3.935 3.76 4.938 7.438.07 3.995-.644 5.385-2.938 8.562-1.111 3.334-.949 3.824.25 6.941l.844 2.268.906 2.353c.59 1.54 1.174 3.084 1.75 4.63l.797 2.068C71 57 71 57 70 59a891.834 891.834 0 0 1-5-10l-1.223-2.387C61.266 41.455 60.33 37.744 61 32a132.038 132.038 0 0 1 3-5c.251-3.21.251-3.21 0-6Z"/><path fill="#D0D0D0" d="M35 46h2c2.463 3.694 2.23 5.633 2 10l-.813 2.063c-.397 1.98-.397 1.98.86 3.511C40.31 63.096 41.652 64.553 43 66c-3.874-1.578-6.424-3.708-9-7-.794-4.358-.066-8.738 1-13Z"/></svg>',
    6: '<svg data-piece="6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><path fill="#F5F5F5" d="M66 11h19v10h10c.027 3.146.047 6.292.063 9.438l.025 2.72.01 2.588.016 2.396C95 40 95 40 94 41c-2.67.141-5.324.042-8 0l1 4 1.695-.656c9.214-3.2 19.964-4.2 29.211-.508 8.478 4.714 12.97 10.97 15.668 20.11 1.689 8.148.645 15.89-3.574 23.054-2.776 3.561-5.854 6.766-9 10a671.164 671.164 0 0 0-5.5 5.938l-2.531 2.714c-2.146 2.267-2.146 2.267-2.969 5.348l2.25.625c3.625 1.812 4.817 3.854 6.75 7.375 1 5 1 5 1 17H31c0-17.861 0-17.861 4.605-22.68L40 110c-2.712-4.35-5.541-7.662-9.313-11.188-7.945-7.65-13.781-15.579-14-26.874-.035-8.073 1.831-13.95 6.063-20.75 7.749-7.534 16.004-9.582 26.613-9.458 5.123.38 9.793 1.61 14.637 3.27v-4h-8V21h10V11ZM46 70c-1.257 1.777-1.257 1.777-1 4 2.446 4.586 5.762 7.92 9.512 11.484C56 87 56 87 57 89h4V70c-8.34-3.707-8.34-3.707-15 0Zm44 0c-1.193.973-1.193.973-1.114 2.766l.016 2.27.01 2.45.025 2.576.014 2.588c.012 2.117.03 4.233.049 6.35 4.952-.41 6.973-2.524 10.25-6.125l2.64-2.82c2.392-3.463 2.84-5.9 3.11-10.055-6.025-3.908-8.57-2.977-15 0Z"/><path fill="#4C4C4C" d="M66 11h19v10h10c.027 3.146.047 6.292.063 9.438l.025 2.72.01 2.588.016 2.396C95 40 95 40 94 41c-2.67.141-5.324.042-8 0l1 4 1.695-.656c9.214-3.2 19.964-4.2 29.211-.508 8.478 4.714 12.97 10.97 15.668 20.11 1.689 8.148.645 15.89-3.574 23.054-2.776 3.561-5.854 6.766-9 10a671.164 671.164 0 0 0-5.5 5.938l-2.531 2.714c-2.146 2.267-2.146 2.267-2.969 5.348l2.25.625c3.625 1.812 4.817 3.854 6.75 7.375 1 5 1 5 1 17H31c0-17.861 0-17.861 4.605-22.68L40 110c-2.712-4.35-5.541-7.662-9.313-11.188-7.945-7.65-13.781-15.579-14-26.874-.035-8.073 1.831-13.95 6.063-20.75 7.749-7.534 16.004-9.582 26.613-9.458 5.123.38 9.793 1.61 14.637 3.27v-4h-8V21h10V11Zm3 4v10H59v12h10c-.52 2.214-1.042 4.427-1.563 6.64-.559 2.616-.559 2.616-.437 6.36l-2.352-.875c-9.806-3.37-21.05-5.7-30.91-1.16-6.946 4.136-11.067 9.249-13.32 17.05C18.867 72.38 20.346 78.53 24 85c2.768 3.568 5.856 6.764 9 10a715.703 715.703 0 0 1 5.438 5.938l2.496 2.714C43 106 43 106 45 109c2.62.495 2.62.495 5.731.468l3.642.077 3.955.03 4.051.044c2.835.027 5.67.04 8.504.047 3.624.01 7.245.072 10.868.146 2.791.049 5.582.061 8.375.064 1.982.01 3.964.059 5.945.107 6.481.13 6.481.13 12.022-2.724 1.512-2.02 2.694-4.052 3.907-6.259a175.223 175.223 0 0 1 5.5-5.375c7.122-6.843 12.609-14.227 12.813-24.25-.065-7.888-1.603-12.237-6.688-18.125-8.495-7.281-15.75-7.906-26.484-7.456-4.784.46-8.795 2.247-13.141 4.206l-2-13h9V25H81V15H69Z"/><path fill="#F7F7F7" d="m63.23 110.832 2.642-.01c1.838-.005 3.676-.007 5.514-.007 2.776-.002 5.551-.02 8.327-.04 25.623-.081 25.623-.081 33.287 5.225 4.63 4.939 3 8.48 3 16H35c0-12 0-12 1.5-15.063 7.722-5.984 17.33-6.092 26.73-6.105Z"/><path fill="#4D4D4D" d="m98.25 63.563 2.453.066c2.5.404 4.161 1.016 6.297 2.371 2.503 3.755 2.453 5.547 2 10-2.353 4.518-5.658 7.818-9.316 11.29-1.762 1.66-1.762 1.66-2.965 3.801C95 93 95 93 92.519 93.391l-2.707-.141-2.73-.11L85 93c-.233-3.895-.375-7.788-.5-11.688l-.203-3.341c-.192-7.945-.192-7.945 2.335-10.84 3.672-2.434 7.16-3.791 11.618-3.569ZM90 70c-1.193.973-1.193.973-1.114 2.766l.016 2.27.01 2.45.025 2.576.014 2.588c.012 2.117.03 4.233.049 6.35 4.952-.41 6.973-2.524 10.25-6.125l2.64-2.82c2.392-3.463 2.84-5.9 3.11-10.055-6.025-3.908-8.57-2.977-15 0Z"/><path fill="#494949" d="M58 64c2.798 1.211 4.834 2.834 7 5 .087 1.78.107 3.565.098 5.348l-.01 3.271-.025 3.444-.014 3.455A2762.06 2762.06 0 0 1 65 93c-8.1.547-8.1.547-11.418-1.469l-1.77-2.031-1.949-2.223L48 85l-1.832-1.996c-2.97-3.457-4.576-6.143-4.855-10.754.259-3.126.634-4.175 2.5-6.813C48.548 63.301 52.89 63.23 58 64Zm-12 6c-1.257 1.777-1.257 1.777-1 4 2.446 4.586 5.762 7.92 9.512 11.484C56 87 56 87 57 89h4V70c-8.34-3.707-8.34-3.707-15 0Z"/><path fill="#CFCFCF" d="M124 55c4.104 3.693 5.74 6.726 6.371 12.234.238 12.582-3.708 18.4-12.09 27.41a310.113 310.113 0 0 1-7.87 7.817c-1.626 1.628-1.626 1.628-2.849 4.477C106 109 106 109 104.047 109.305c-2.018.007-4.036-.14-6.047-.305 1.532-3.681 3.739-5.903 6.613-8.633l2.783-2.695a993.841 993.841 0 0 1 5.797-5.524c6.419-6.243 11.738-12.215 13.366-21.25l-.121-2.523-.13-2.746C125.877 61.94 125.074 58.555 124 55Z"/></svg>',
    33: '<svg data-piece="33" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><path fill="#555251" d="M88.313 37.61c4.57 3.766 7.265 8.11 8.023 14.003.096 6.67-.987 10.63-4.336 16.387v2c1.79 1.363 1.79 1.363 4 2.625l2.25 1.352L100 75c-.481 4.814-.8 7.602-3 12h-9c3.371 10.623 9.299 17.258 18.246 23.684 5.437 4.08 7.1 8.945 8.754 15.316v10H35c0-11.075.651-17.266 8.04-25.168 1.919-1.793 3.883-3.311 6.023-4.832C55.93 101.075 59.45 94.934 62 87h-9c-4.008-8.517-4.008-8.517-3-12 2.505-1.981 5.176-3.519 8-5l-.875-2.188L56 65l-1.047-2.344c-2.073-5.777-1.908-12.35.61-17.968 3.086-5.293 7.163-8.701 12.75-11.126 7.568-1.154 13.66-.4 20 4.047Z"/><path fill="#565352" d="M66 88c4.363 3.65 8.474 7.389 12.422 11.484 1.708 1.73 1.708 1.73 4.578 3.516v2l1.703.848c1.536.77 3.067 1.549 4.594 2.336 3.975 2.031 7.831 3.924 12.078 5.316 4.817 1.993 6.505 4.372 8.875 8.875C111 125 111 125 111 132H39c0-7.419.617-11.153 5-17 2.662-2.217 5.367-4.239 8.186-6.243C57.44 104.927 60.309 100.84 63 95l1.016-2.184C64.718 91.23 65.367 89.617 66 88Z"/><path fill="#272727" d="M88.313 37.61c4.57 3.766 7.265 8.11 8.023 14.003.096 6.67-.987 10.63-4.336 16.387v2c1.79 1.363 1.79 1.363 4 2.625l2.25 1.352L100 75c-.481 4.814-.8 7.602-3 12h-9c3.371 10.623 9.299 17.258 18.246 23.684 5.437 4.08 7.1 8.945 8.754 15.316v10H35c0-11.075.651-17.266 8.04-25.168 1.919-1.793 3.883-3.311 6.023-4.832C55.93 101.075 59.45 94.934 62 87h-9c-4.008-8.517-4.008-8.517-3-12 2.505-1.981 5.176-3.519 8-5l-.875-2.188L56 65l-1.047-2.344c-2.073-5.777-1.908-12.35.61-17.968 3.086-5.293 7.163-8.701 12.75-11.126 7.568-1.154 13.66-.4 20 4.047Zm-29.376 8.078c-1.582 5.59-2.259 11.281.118 16.73C60.809 65.268 62.633 67.633 65 70l-11 7c.445 4.63.445 4.63 2 6 1.686.072 3.375.084 5.063.063l2.785-.028L66 83c-2.545 12.995-6.517 20.528-17.301 28.244-5.021 3.712-8.16 7.665-9.699 13.756v7h72c0-7.898-1.164-11.678-6.188-17.563-2.378-2.061-4.794-3.929-7.312-5.812-8.08-6.228-11.276-13.284-13.188-23.188L84 83l2.117.105 2.758.082 2.742.106L94 83c2.277-2.815 2.277-2.815 2-6-2.455-1.928-2.455-1.928-5.5-3.688l-3.094-1.886L85 70l1.277-1.68 1.66-2.195 1.653-2.18C92.94 59.325 92.642 54.534 92 49c-1.691-4.782-4.356-7.978-8.75-10.5-9.738-4.056-17.95-1.104-24.313 7.188Z"/><path fill="#454242" d="M66 83h18l1.25 5.563C86.546 93.734 88.03 97.59 91 102l1.688 2.563c3.318 3.497 7.234 5.901 11.312 8.437-5.005 1.668-9.333-.928-14-3-4.684-2.69-8.215-6.165-12-10-.964-.966-1.929-1.93-2.895-2.895L67 89l-2 1 1-7Z"/><path fill="#747171" d="M62 98c.892 2.472 1.064 3.768.355 6.332-2.932 6.227-6.043 9.297-11.843 12.93-3.339 2.31-5.7 5.092-8.235 8.234L41 127h-1c.355-5.79 1.852-9.789 6-14 2.746-2.082 5.56-4.041 8.395-6 3.433-2.636 5.38-5.318 7.605-9Z"/><path fill="#444141" d="M86 41c3.468 3.237 5.667 5.743 6.371 10.516C92.535 58.267 91.543 62.85 87 68c-3.215 1.607-6.436 1.057-10 1 1.391-2.782 3.302-3.552 6-5h2c3.42-6.612 4.068-12.862 2-20.063L86 41ZM86 71l10 6c-1 5-1 5-2 6-1.52.072-3.042.084-4.563.063l-2.503-.028L85 83l1.063-3.188C87.33 75.817 87.33 75.817 86 71Z"/><path fill="#726F6E" d="m72 39-2.688 1.375C63.498 44.21 61.447 51.781 59 58h-1c-.64-6.146-.032-10.234 3.57-15.332C64.66 39.062 67.38 37.118 72 39Z"/><path fill="#716E6D" d="m65 71-2 6c-2.375.625-2.375.625-5 1l-2-2a466.06 466.06 0 0 1 3.375-2.5l1.898-1.406C63 71 63 71 65 71Z"/></svg>',
    34: '<svg data-piece="34" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><path fill="#555251" d="M60.508 15.043c3.11 1.194 4.272 2.699 6.367 5.27 4.861 5.137 9.774 6.315 16.477 7.816 12.176 2.907 21.9 11.036 28.406 21.621 5.261 9.53 7.645 18.731 7.68 29.625l.011 2.575c-.167 9.432-2.618 18.11-5.449 27.05l1.68 1.32 2.195 1.805 2.18 1.758C125.832 120.17 124 127.843 124 136H35c0-17.952 0-17.952 4.465-22.488 2.05-1.78 4.104-3.297 6.535-4.512l1.188-3.5C50.65 95.885 58.483 89.514 66 83c1.843-1.617 3.398-3.13 5-5v-4l-1.582 1.207c-4.332 3.118-7.92 5.105-13.168 6.23-4.035.932-5.946 1.746-8.313 5.188L46 90c-3.728 1.864-8.019.75-12 0-5.16-1.764-9.279-4.125-12-9-1.13-5.136.387-8.04 3.063-12.313a175.932 175.932 0 0 1 5.785-8.124c3.543-4.735 5.739-8.899 7.527-14.563 2.06-6.333 4.891-9.891 9.547-14.547 2.873-3.392 3.974-6.86 5.129-11.105 1.517-3.753 3.348-5.375 7.457-5.305Z"/><path fill="#272727" d="M60.508 15.043c3.11 1.194 4.272 2.699 6.367 5.27 4.861 5.137 9.774 6.315 16.477 7.816 12.176 2.907 21.9 11.036 28.406 21.621 5.261 9.53 7.645 18.731 7.68 29.625l.011 2.575c-.167 9.432-2.618 18.11-5.449 27.05l1.68 1.32 2.195 1.805 2.18 1.758C125.832 120.17 124 127.843 124 136H35c0-17.952 0-17.952 4.465-22.488 2.05-1.78 4.104-3.297 6.535-4.512l1.188-3.5C50.65 95.885 58.483 89.514 66 83c1.843-1.617 3.398-3.13 5-5v-4l-1.582 1.207c-4.332 3.118-7.92 5.105-13.168 6.23-4.035.932-5.946 1.746-8.313 5.188L46 90c-3.728 1.864-8.019.75-12 0-5.16-1.764-9.279-4.125-12-9-1.13-5.136.387-8.04 3.063-12.313a175.932 175.932 0 0 1 5.785-8.124c3.543-4.735 5.739-8.899 7.527-14.563 2.06-6.333 4.891-9.891 9.547-14.547 2.873-3.392 3.974-6.86 5.129-11.105 1.517-3.753 3.348-5.375 7.457-5.305ZM59 19c-1.704 2.634-2.976 4.918-3.875 7.938-1.662 4.525-4.568 7.674-8.14 10.859-2.383 2.645-3.218 4.966-4.36 8.328-3.532 9.62-8.71 17.258-15.086 25.234C25.688 74.535 25.542 76.38 26 80c3.956 5.12 7.895 6.43 14.063 7.563 2.934-.25 2.934-.25 4.25-2.06.84-1.262 1.667-2.535 2.48-3.816C48.535 79.251 50.119 78.686 53 78l3.313-.25c5-1.017 7.858-3.497 11.687-6.75l2.063-1.73c1.658-1.408 3.3-2.837 4.937-4.27 1.457 5.332 2.162 9.867-.523 14.797-3.43 4.834-8.13 8.56-12.545 12.46C57.454 96.32 53.54 100.438 51 106v3h59c5.496-20.883 9.325-38.103-1.348-57.387C101.984 41.067 92.222 33.913 80 31l-2.242-.3c-6.499-.934-9.482-3.854-13.813-8.704C62.073 19.77 62.073 19.77 59 19Z"/><path fill="#555251" d="M79.667 110.815c2.527-.003 5.054-.02 7.581-.04 21.244-.076 21.244-.076 28.314 4.662l1.942 1.247C119 118 119 118 120 121v11H39c0-12.906 0-12.906 3-16 9.998-7.511 25.754-5.186 37.667-5.185Z"/><path fill="#444141" d="M84 33c9.803 1.446 17.24 8.36 23.059 15.988C116.089 62.998 117.28 79.022 114 95l-4 14-43-1v-1h21l2-6a95.403 95.403 0 0 1 3.25-5.125c8.474-12.96 13.102-24.353 10.172-39.953-2.716-8.64-8.622-15.992-16.484-20.547L84 34v-1Z"/><path fill="#737070" d="M79.667 110.815c2.527-.003 5.054-.02 7.581-.04 11.183-.04 21.107-.065 30.752 6.225l-1 2-3.18-.438c-24.04-2.995-48.8-2.467-72.82.438 1.33-3.056 1.833-3.9 4.812-5.688 10.238-3.867 23.026-2.498 33.855-2.497ZM59 19l2 1c1.202 3.606 1.327 6.21 1 10-1.98 3.276-3.72 4.83-7 6.813-4.5 3.281-6.19 7.368-7.71 12.66-2.385 8.012-6.785 13.115-12.317 19.168-2.12 2.32-3.988 4.705-5.79 7.28L27 79h-1c-.268-3.889.146-5.815 2.484-8.926l1.586-2.166 1.68-2.22c5.196-6.956 9.28-13.665 12.188-21.876 1.66-4.259 3.585-6.77 7.062-9.812 3.535-3.742 4.95-7.26 6.387-12.11C58 20 58 20 59 19Z"/><path fill="#282727" d="m63 42 2 2c-.375 2.625-.375 2.625-1 5-3.473 1.158-6.36 1.069-10 1 .36-2.664.712-4.582 2.25-6.813C58.633 41.57 60.179 41.639 63 42Z"/><path fill="#444141" d="M79 55c2.916 4.374 1.85 7.973 1 13-1.063 3.625-1.063 3.625-2 6h-1l-.367-1.934-.508-2.504-.492-2.496L75 65l-2-1 6-9Z"/><path fill="#434141" d="M48 73c3.816.652 6.029 1.469 9 4l-1.793.41C48.765 79.165 46.363 81.25 43 87c0-3.552.994-5.488 2.5-8.688l1.406-3.011L48 73Z"/></svg>',
    35: '<svg data-piece="35" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><path fill="#272727" d="M80 14c3.454 2.94 5.668 5.054 6.438 9.563-.458 3.596-1.092 4.69-3.126 7.562C74.181 44.047 71.838 59.497 71 75h7l-.105-2.133C77.547 60.192 79.853 46.72 87 36c10.458 4.66 17.277 16.207 21.375 26.438 4.022 12.204 3.332 24.936-2.29 36.515A209.207 209.207 0 0 1 101 108l2.012.48c5.623 1.486 9.284 2.775 12.988 7.52 2 4 2 4 2 20H29c0-15.519 0-15.519 3.688-21.938C36.883 110.32 41.58 109.005 47 108l-1.426-2.133C38.01 93.87 35.14 81.153 38.063 67.25c3.6-13.076 11.374-24.18 21.796-32.785 1.378-1.454 1.378-1.454 1.11-3.735l-.469-2.543C59.887 23.51 60.17 20.962 63 17c5.469-5.188 9.96-5.877 17-3Z"/><path fill="#555251" d="M76 16c2.917 1.79 4.617 3.016 5.871 6.238.18 3.842-1.541 6.158-3.558 9.262C69.406 46.133 67.93 62.252 67 79h15l-.14-3.41C81.527 63.862 82.232 52.547 88 42c7.337 2.768 13.159 13.152 16.293 20.078C108.375 73.175 107.645 83.837 104 95c-2.31 4.767-4.902 9.545-9 13-1.915.408-1.915.408-4.1.452l-2.49.067-2.68.02-2.768.038c-1.935.02-3.869.03-5.803.034-2.951.014-5.898.081-8.848.15-1.881.013-3.762.022-5.643.028l-2.662.081c-3.557-.04-6.014-.08-8.86-2.345-8.359-9.512-10.735-20.475-10.521-32.9C42.393 56.537 55.212 43.408 67 32l-1.563-1.563C64 28 64 28 64.064 24.5 65.07 20.736 65.984 19.376 69 17c2.609-1.304 4.097-1.338 7-1ZM71.105 110.815c2.128-.002 4.255-.02 6.383-.04 24.262-.104 24.262-.104 33.512 5.225 4.725 5.05 4 8.977 4 16H34c0-13 0-13 2.062-16.188 10.083-6.22 23.559-4.999 35.043-4.997Z"/><path fill="#444141" d="M99 55c2.685 2.347 3.847 4.565 5.125 7.875l1.008 2.555c3.593 10.648 2.32 22.446-2.563 32.52-4.273 7.28-4.273 7.28-7.57 10.05-1.901.34-1.901.34-4.012.293l-2.295-.03c-.785-.024-1.571-.05-2.38-.076l-2.417-.04A525.76 525.76 0 0 1 78 108v-2c1.723-1.262 1.723-1.262 4.063-2.688C91.219 97.347 97.653 89.953 100 79c.096-2.782.14-5.532.125-8.313l.012-2.224A81.507 81.507 0 0 0 99 55Z"/><path fill="#747171" d="M71.105 110.815c2.128-.002 4.255-.02 6.383-.04C102.09 110.67 102.09 110.67 111 116l2 3-1.695-.184C85.859 116.157 60.422 115.984 35 119c3.288-4.403 5.593-6.138 11-7 8.346-1.073 16.704-1.186 25.105-1.185Z"/><path fill="#716E6E" d="M70 33v2a69.55 69.55 0 0 1-3.438 2.75C53.117 49.292 47.395 67.254 44.642 84.184L44 87l-2 1c-3.198-10.721-.958-21.272 4-31 4.398-7.497 14.523-24 24-24Z"/><path fill="#434141" d="M78 18c2.063 1.688 2.063 1.688 4 4-.334 3.82-1.62 6.246-3.75 9.375C69.327 45.789 67.918 62.476 67 79h14v1H66c-4.277-8.555-5.697-16.664-2.625-25.938 2.475-6.285 5.782-12.196 9.095-18.073C75.585 30.327 78 24.57 78 18Z"/><path fill="#706D6D" d="m69 17 3 1-2.313 2.25C67.561 22.426 65.745 24.522 64 27c.432-4.752 1.328-6.92 5-10Z"/></svg>',
    36: '<svg data-piece="36" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><path fill="#272727" d="m75 23.875 3.063-.008c2.754.125 5.255.512 7.937 1.133.336 1.937.669 3.875 1 5.813l.563 3.269C88 37 88 37 88 40h4c.09-.905.09-.905.184-1.828l.254-2.422c.08-.789.162-1.578.246-2.39.292-2.184.737-4.237 1.316-6.36 1.477-.111 2.957-.187 4.438-.25l2.496-.14c4.418.562 8.09 2.448 12.066 4.39a837.345 837.345 0 0 1-.313 9.5l-.068 2.688c-.28 6.945-.985 13.242-6.181 18.312C104 63 104 63 102 63l.459 3.668c.563 4.506 1.12 9.013 1.677 13.52.241 1.947.484 3.895.728 5.842.35 2.805.697 5.61 1.042 8.415l.332 2.624c.53 4.342.887 8.546.762 12.931l2.188.188c3.728 1.077 5.304 2.897 7.812 5.812 2 4 2 4 2 20H31c0-18.351 0-18.351 4-23 2.985-2.257 4.25-3 8-3l.146-2.686c.588-9.812 1.647-19.506 2.916-29.251.19-1.474.377-2.947.565-4.42.453-3.549.911-7.096 1.373-10.643l-2.36-.835C41.924 60.525 40.87 58.568 39 55c-.59-2.712-1-5.14-1.25-7.875l-.234-2.027c-.51-4.716-.58-9.358-.516-14.098 6.488-3.51 11.648-4.553 19-4 .339 1.415.67 2.832 1 4.25l.563 2.39C58 36 58 36 58 40h4c.09-1.247.09-1.247.184-2.52l.254-3.292c.08-1.08.162-2.158.246-3.27C63 28 63 28 64 25c3.725-.863 7.179-1.135 11-1.125Z"/><path fill="#555251" d="M98 64c1.572 8.03 2.701 16.06 3.625 24.188l.406 3.404.383 3.326.342 2.962c.289 3.696.244 7.412.244 11.12H47c0-10.015 0-10.015.938-14.75.777-4.282 1.279-8.47 1.562-12.813C49.893 75.52 50.802 69.805 52 64c13.868-4.623 31.887-2.541 46 0Z"/><path fill="#555251" d="M67 28h16c1.11 5.552 1.068 10.35 1 16h11l.438-4.813c.27-2.976.612-5.336 1.562-8.187l3.75-.125 2.11-.07c2.442.223 4.026.986 6.14 2.195.708 17.772.708 17.772-3.176 23.836C104.07 58.627 102.238 59.88 100 61c-2.336-.092-4.67-.25-7-.438-5.984-.428-11.938-.678-17.938-.687l-2.25-.009c-3.87.015-7.67.182-11.519.572l-2.31.215c-1.446.144-2.889.315-4.327.518-2.817.278-5.001.248-7.422-1.3-3.45-3.178-5.033-5.887-5.609-10.621l-.39-3.125c-.33-4.388-.41-8.729-.235-13.125 2.9-1.659 4.916-2.236 8.25-2.125L53 31c1.452 4.537 2.235 8.18 2 13h11l-.035-2.484-.028-3.266-.035-3.234C66 32 66 32 67 28Z"/><path fill="#565352" d="M73.06 110.74c2.568.01 5.137 0 7.706-.013 24.757-.023 24.757-.023 32.234 6.273 2 2 2 2 2 15H35c0-13 0-13 2.625-16.687 9.387-6.26 24.563-4.628 35.435-4.574Z"/><path fill="#444141" d="M66 62c10.906-.223 21.23.06 32 2 1.572 8.03 2.701 16.06 3.625 24.188l.406 3.404c.673 5.845 1.127 11.524.969 17.408-6.75.125-6.75.125-9-1-.52-2.923-.94-5.808-1.313-8.75-1.745-12.22-4.378-23.436-14.437-31.438-3.946-2.2-7.928-3.544-12.25-4.812v-1Z"/><path fill="#757272" d="M72.758 110.815c2.604-.002 5.208-.02 7.812-.04 25.33-.087 25.33-.087 32.43 6.225v2l-2.727-.429c-10.83-1.544-21.468-1.88-32.4-1.832-2.87.011-5.738 0-8.607-.012-10.92-.007-21.47.576-32.266 2.273 1.366-3.184 1.828-3.903 5-5.688 9.522-3.572 20.742-2.498 30.758-2.497Z"/><path fill="#434040" d="m103 31 6 2c.708 17.772.708 17.772-3.176 23.836-2.829 2.887-4.93 4.146-8.949 4.227L94 61l-1-2 2.75-1.688c4.902-4.088 6.04-10.287 7.25-16.312.266-3.372.274-6.63 0-10Z"/><path fill="#817F7E" d="m47 33-.96 2.508c-1.135 3.81-1.482 7.424-1.665 11.367l-.117 2.086C44.165 50.64 44.08 52.32 44 54c-4.023-6.035-3.13-13.967-3-21 2.49-1.245 3.41-.777 6 0Z"/><path fill="#716F6E" d="M97 31h6c-1.285 2.867-2.571 4.976-5 7h-2l1-7Z"/><path fill="#807D7D" d="M67 28h7a858.147 858.147 0 0 1-2.938 3.5l-1.652 1.969L68 35h-1v-7Z"/></svg>',
    37: '<svg data-piece="37" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><path fill="#555251" d="M67.813 18.414c3.354 3.532 5.064 6.74 5.382 11.621C73 32 73 32 71.438 35.437 69.486 40.276 70.46 43.168 72 48l.813 2.574c.702 2.153 1.43 4.292 2.187 6.426 1.98-2.969 3.027-5.516 4.188-8.875l1.105-3.117c.953-4.057.38-6.624-1.418-10.32-1.23-3.776-1.068-6.96.125-10.688 2.355-4.171 5.208-7.115 9.813-8.625 4.795-.838 8.941.36 13.187 2.625 3.547 3.547 4.871 6.292 5.25 11.313-.324 4.775-1.762 7.901-4.813 11.562C101 42 101 42 99 42l.494 1.688c.549 2.507.62 4.732.604 7.296l-.01 2.832-.025 2.934-.014 2.98c-.012 2.424-.028 4.847-.049 7.27l2.313-2.313C105 62 105 62 106.816 60.489c1.705-2.143 1.348-3.618 1.121-6.3-.15-4.917.739-7.402 4.063-11.188 3.09-2.987 5.724-3.748 10-4 4.395.694 7.02 1.635 9.875 5 3.109 4.389 3.838 7.654 3.125 13-1.556 3.967-3.404 6.603-7 9h-3l-1.05 3.434c-2.575 7.723-5.93 15.152-9.138 22.629l-1.982 4.646A6843.198 6843.198 0 0 1 108 108c1.907 2.092 1.907 2.092 4.375 3.313 4.432 2.849 6.351 5.593 7.625 10.687v14H31c0-17.803 0-17.803 4.43-22.523C38.047 111.119 39.41 110 43 110c-4.05-11.31-8.63-22.36-13.392-33.388l-1.413-3.292-1.28-2.96C26 68 26 68 26 66l-1.688-.188C20.517 64.48 17.788 61.578 16 58c-.574-4.707-.456-8.121 1.75-12.375 2.922-3.41 4.773-5.208 9.125-6.438 4.836-.29 7.907.983 11.875 3.688C40.967 44.969 41.911 46.203 43 49c-.016 2.332-.016 2.332-.25 4.813-.124 4.187.49 6.145 3.25 9.312.977.982 1.97 1.95 3 2.875 1.608-1.608 1.203-3.397 1.281-5.621l.114-2.834.105-2.983c.069-1.936.141-3.872.219-5.808l.092-2.615C51 44 51 44 52 42l-1.75-.625C47.015 39.398 45.741 37.358 44 34c-.812-6.391.229-9.802 4-15 6.054-4.657 13.566-5.46 19.813-.586Z"/><path fill="#272727" d="M67.813 18.414c3.354 3.532 5.064 6.74 5.382 11.621C73 32 73 32 71.438 35.437 69.486 40.276 70.46 43.168 72 48l.813 2.574c.702 2.153 1.43 4.292 2.187 6.426 1.98-2.969 3.027-5.516 4.188-8.875l1.105-3.117c.953-4.057.38-6.624-1.418-10.32-1.23-3.776-1.068-6.96.125-10.688 2.355-4.171 5.208-7.115 9.813-8.625 4.795-.838 8.941.36 13.187 2.625 3.547 3.547 4.871 6.292 5.25 11.313-.324 4.775-1.762 7.901-4.813 11.562C101 42 101 42 99 42l.494 1.688c.549 2.507.62 4.732.604 7.296l-.01 2.832-.025 2.934-.014 2.98c-.012 2.424-.028 4.847-.049 7.27l2.313-2.313C105 62 105 62 106.816 60.489c1.705-2.143 1.348-3.618 1.121-6.3-.15-4.917.739-7.402 4.063-11.188 3.09-2.987 5.724-3.748 10-4 4.395.694 7.02 1.635 9.875 5 3.109 4.389 3.838 7.654 3.125 13-1.556 3.967-3.404 6.603-7 9h-3l-1.05 3.434c-2.575 7.723-5.93 15.152-9.138 22.629l-1.982 4.646A6843.198 6843.198 0 0 1 108 108c1.907 2.092 1.907 2.092 4.375 3.313 4.432 2.849 6.351 5.593 7.625 10.687v14H31c0-17.803 0-17.803 4.43-22.523C38.047 111.119 39.41 110 43 110c-4.05-11.31-8.63-22.36-13.392-33.388l-1.413-3.292-1.28-2.96C26 68 26 68 26 66l-1.688-.188C20.517 64.48 17.788 61.578 16 58c-.574-4.707-.456-8.121 1.75-12.375 2.922-3.41 4.773-5.208 9.125-6.438 4.836-.29 7.907.983 11.875 3.688C40.967 44.969 41.911 46.203 43 49c-.016 2.332-.016 2.332-.25 4.813-.124 4.187.49 6.145 3.25 9.312.977.982 1.97 1.95 3 2.875 1.608-1.608 1.203-3.397 1.281-5.621l.114-2.834.105-2.983c.069-1.936.141-3.872.219-5.808l.092-2.615C51 44 51 44 52 42l-1.75-.625C47.015 39.398 45.741 37.358 44 34c-.812-6.391.229-9.802 4-15 6.054-4.657 13.566-5.46 19.813-.586ZM49 24c-1.609 3.218-1.612 6.52-1 10 2.21 3.045 2.21 3.045 5 5h2l-2 37-7-7.25-2.215-2.263-1.722-1.815-1.778-1.84c-2.134-3.042-1.256-6.193-.972-9.77-.013-3.394-.296-4.038-2.376-7C33.386 43.569 31.341 42.925 27 43c-4.258 2.23-4.258 2.23-7 6-.493 5.755-.493 5.755 1.688 10.938C24.212 62.188 25.67 62.722 29 63l.532 1.662c1.778 5.459 3.787 10.764 6.007 16.057l.989 2.375c.682 1.638 1.366 3.275 2.052 4.91 1.053 2.516 2.1 5.033 3.147 7.55l2 4.79.95 2.285c1.259 3.434 1.259 3.434 3.323 6.371 2.362.005 4.692-.054 7.05-.156l4.472-.163 2.374-.09c13.762-.517 27.361-.7 41.104.409 3.342-6.965 6.442-13.958 9.219-21.164l.815-2.096a779.808 779.808 0 0 0 3.289-8.556c.8-2.124 1.627-4.236 2.458-6.348l.711-1.95c1.386-3.45 2.346-4.79 5.592-6.704L128 61c2.677-2.498 2.973-3.749 3.375-7.438-.401-3.809-.944-5.628-3.375-8.562-2.884-1.715-4.645-2.007-8-1.938-4.107 1.284-5.59 2.322-8 5.938.03 1.898.145 3.796.313 5.688.207 4.116.084 5.768-2.38 9.14a123.72 123.72 0 0 1-5.355 4.918c-2.551 2.23-4.54 4.555-6.578 7.254-.945-8.031-1.299-16.046-1.563-24.125l-.13-3.766c-.105-3.036-.208-6.072-.307-9.109l1.89-.895c2.652-1.389 3.683-2.465 5.11-5.105.523-4.11.46-6.235-1.688-9.813-3.374-3.191-5.655-4.222-10.312-4.125-3.751 1.173-5.44 3.013-8 5.938l-1 1c-.42 4.29-.525 6.309 2.13 9.807C86 39 86 39 85.552 42.327l-1.314 3.568-.682 1.917a336.264 336.264 0 0 1-2.243 6c-.494 1.361-.986 2.722-1.475 4.084C76.268 67.732 76.268 67.732 75 69a711.708 711.708 0 0 1-4.492-12.378 286.379 286.379 0 0 0-1.537-4.201c-4.363-11.674-4.363-11.674-3.377-16.063C66.699 34.23 66.699 34.23 69 31c.08-4.04-.675-5.557-3.063-8.813C59.269 17.221 54.54 18.19 49 24Z"/><path fill="#555251" d="m76.125 110.75 2.035-.016c27.703-.168 27.703-.168 35.84 6.266 2 4 2 4 2 15H35c0-12.667 0-12.667 4-17 9.822-6.183 25.87-4.21 37.125-4.25Z"/><path fill="#444141" d="M127 45c2.926 2.798 3.92 4.154 4.313 8.313-.367 4.324-1.193 5.736-4.313 8.687l-2.379.525c-4.338 2.441-5.195 6.745-6.871 11.26l-1.153 2.944c-1.63 4.158-3.216 8.332-4.804 12.507a1186.748 1186.748 0 0 1-3.543 9.112l-1.067 2.882-1.042 2.65-.89 2.343C104 108 104 108 101.587 108.765c-3.439.312-6.781.074-10.212-.203-9.464-.67-18.892-.656-28.375-.562v-1l3.402-.043c8.601-.223 15.624-.41 22.598-5.957l2.336-1.734c10.985-8.94 18.846-21.97 25.46-34.356 1.9-3.39 3.727-5.427 6.938-7.5 2.877-1.829 2.877-1.829 3.95-5.086l-.246-2.636-.192-2.676L127 45Z"/><path fill="#747171" d="m76.125 110.75 2.035-.016c27.053-.164 27.053-.164 35.84 6.266v2l-3.906-.438C85.742 116.037 61.317 116.115 37 119c1.787-3.853 1.787-3.853 3.703-5.18 10.976-3.92 23.905-3.03 35.422-3.07Z"/><path fill="#434040" d="M98 21c3.286 2.711 4.85 4.179 5.625 8.438-.818 4.665-2.264 6.281-5.625 9.562h-2v24h-1c-3.572-25.13-3.572-25.13-.879-30.047a78.39 78.39 0 0 1 2.766-3.351c1.89-2.718 1.436-5.44 1.113-8.602ZM65 22c2.299 1.799 2.995 2.985 3.875 5.813.153 3.893-.915 5.87-2.875 9.187-1.456 2.912-.24 4.774.738 7.717.507 1.477 1.015 2.953 1.524 4.43 1.84 5.546 1.84 5.546.738 8.853-1.321-2.892-2.63-5.79-3.938-8.688l-1.13-2.474c-4.55-10.123-4.55-10.123-3.19-13.9.56-.96.56-.96 1.133-1.938 1.653-3.01 2.694-5.55 3.125-9Z"/><path fill="#444141" d="M34 45c3 1 3 1 5 4 .086 2.704.093 5.306 0 8-.016 4.296-.016 4.296 2.5 7.25L44 67c-4.187-1.61-7.842-4.037-10-8-.514-4.708-.349-9.283 0-14Z"/><path fill="#202020" d="M101 22c2.837 1.974 3.09 3.369 3.938 6.813.324 3.455.014 4.28-1.688 7.562C101 39 101 39 98 41a65.357 65.357 0 0 0-.688 7.625l-.103 2.14c-.083 1.745-.147 3.49-.209 5.235h-1a399.62 399.62 0 0 1-.313-8.25l-.126-2.355c-.048-2.236-.028-4.206.439-6.395 2.457-2.422 2.457-2.422 5-4 1.984-3.968 1.326-8.855 0-13Z"/><path fill="#706D6D" d="M55.813 19.625 58 20l-1.207 1.32C53.511 25.01 51.006 28.43 49 33h-1c-.423-4.232-.404-7.045 2.188-10.438C53 20 53 20 55.812 19.625Z"/><path fill="#716E6E" d="M27.313 44.188 29 45l-2.313 2.125C24.035 49.964 22.56 52.469 21 56h-1c-.435-4.437-.475-6.367 2.25-10 2.75-2 2.75-2 5.063-1.813ZM119.313 44.188 121 45l-2.313 2.125C116.034 49.964 114.56 52.469 113 56h-1c-.435-4.437-.475-6.367 2.25-10 2.75-2 2.75-2 5.063-1.813ZM90.313 20.188 92 21l-2.313 1.625C86.772 25.202 85.53 27.458 84 31h-1c-.479-4.117-.322-5.58 2.25-8.938C88 20 88 20 90.313 20.188Z"/></svg>',
    38: '<svg data-piece="38" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><path fill="#555251" d="M66 11h19v10h10c.027 3.146.047 6.292.063 9.438l.025 2.72.01 2.588.016 2.396C95 40 95 40 94 41c-2.67.141-5.324.042-8 0l1 4 1.66-.656c8.874-3.117 19.352-4.364 28.278-.782 8.271 4.449 13.875 10.3 16.64 19.325 1.685 8.439.855 16.701-3.578 24.113-2.785 3.553-5.856 6.765-9 10a713.37 713.37 0 0 0-4.938 5.375l-2.214 2.398c-1.678 2.023-2.803 3.83-3.848 6.227l2.25.625c3.625 1.812 4.817 3.854 6.75 7.375 1 5 1 5 1 17H31c0-18.266 0-18.266 4-23a142.838 142.838 0 0 1 5-4l-3.875-4.313-2.473-2.765a282.914 282.914 0 0 0-5.336-5.719c-7.619-8.016-11.434-13.431-11.816-24.64.238-8.467 2.164-16.56 8.5-22.563 9.762-6.66 17.308-7.71 29-7 3.462.725 6.712 1.7 10 3v-4h-8V21h10V11Zm23 60v18c5.563-1.113 6.56-2.071 10.25-6.125l2.64-2.82c2.392-3.463 2.84-5.9 3.11-10.055-6.934-4.498-7.806-3.097-16 1Zm-43-1c-.92 1.86-.92 1.86-1 4 2.827 5.528 8.102 11.205 13 15h3V70c-8.34-3.707-8.34-3.707-15 0Z"/><path fill="#262626" d="M66 11h19v10h10c.027 3.146.047 6.292.063 9.438l.025 2.72.01 2.588.016 2.396C95 40 95 40 94 41c-2.67.141-5.324.042-8 0l1 4 1.66-.656c8.874-3.117 19.352-4.364 28.278-.782 8.271 4.449 13.875 10.3 16.64 19.325 1.685 8.439.855 16.701-3.578 24.113-2.785 3.553-5.856 6.765-9 10a713.37 713.37 0 0 0-4.938 5.375l-2.214 2.398c-1.678 2.023-2.803 3.83-3.848 6.227l2.25.625c3.625 1.812 4.817 3.854 6.75 7.375 1 5 1 5 1 17H31c0-18.266 0-18.266 4-23a142.838 142.838 0 0 1 5-4l-3.875-4.313-2.473-2.765a282.914 282.914 0 0 0-5.336-5.719c-7.619-8.016-11.434-13.431-11.816-24.64.238-8.467 2.164-16.56 8.5-22.563 9.762-6.66 17.308-7.71 29-7 3.462.725 6.712 1.7 10 3v-4h-8V21h10V11Zm3 4v10H59v12h10l-3 12-5.688-1.5C49.925 45.14 39.397 44.138 30 50c-6.092 5.101-9.335 11.231-10.242 19.102C19.455 77.805 22.454 83.662 28 90a220.724 220.724 0 0 0 6.46 6.336C37 99 37 99 38.635 101.514c3.536 5.406 3.536 5.406 9.101 8.183 3.293.028 6.432-.244 9.703-.635 2.479-.207 4.96-.402 7.44-.585l3.966-.3c4.397-.248 8.73-.047 13.12.221l2.256.128c2.943.17 5.883.346 8.821.596 7.945.99 7.945.99 15.054-1.73 1.52-2.056 2.702-4.138 3.905-6.392a142.072 142.072 0 0 1 5-4.938c6.826-6.681 13.228-14.283 13.375-24.25-.134-7.08-2.502-12.57-6-18.624-6.643-6.119-13.427-7.837-22.313-7.724-6.487.3-12.033 2.124-18.062 4.536l-2-12 9-1V25H81V15H69Z"/><path fill="#555251" d="M75.893 110.74c2.5.01 5 0 7.502-.013 21.855-.02 21.855-.02 29.605 5.273 3.596 4.914 3.575 10.125 3 16-1.72 1.72-3.909 1.12-6.201 1.124l-2.256-.01h-2.365c-2.592 0-5.184-.009-7.776-.016l-5.376-.005c-4.727-.003-9.453-.013-14.18-.024-4.819-.01-9.638-.015-14.457-.02-9.463-.01-18.926-.028-28.389-.049-.082-1.895-.14-3.791-.188-5.687l-.105-3.2c.33-3.514 1.218-5.291 3.293-8.113 9.33-7.233 26.576-5.319 37.893-5.26Z"/><path fill="#747171" d="M75.591 110.815c2.536-.003 5.072-.02 7.608-.04C104.733 110.7 104.733 110.7 113 116l1 3-2.435-.429c-11.151-1.74-22.164-1.877-33.435-1.832-3.19.011-6.38 0-9.57-.012-10.699-.007-21.02.239-31.56 2.273 1.429-3.43 1.832-3.916 5.375-5.688 10.43-3.434 22.348-2.498 33.216-2.497Z"/><path fill="#272727" d="M104.988 64.871c2.953 2.15 3.963 3.912 4.762 7.442-1.034 5.084-3.43 7.813-6.75 11.687l-1.828 2.508L99.25 89l-1.734 2.313C93.593 93.944 89.589 93.317 85 93a689.406 689.406 0 0 1-.313-11.75l-.126-3.367c-.124-8.23-.124-8.23 2.771-11.586 5.458-2.653 11.887-3.954 17.656-1.426ZM89 71v18c5.563-1.113 6.56-2.071 10.25-6.125l2.64-2.82c2.392-3.463 2.84-5.9 3.11-10.055-6.934-4.498-7.806-3.097-16 1Z"/><path fill="#262626" d="M57 64c3.402 1.336 5.435 2.435 8 5 .227 2.43.227 2.43.195 5.445l-.02 3.262-.05 3.418-.027 3.441C65.074 87.378 65.04 90.19 65 93c-3.95.554-7.503.985-10.945-1.28-1.814-1.783-3.443-3.629-5.055-5.595l-1.73-1.973c-3.829-4.41-5.732-6.962-5.598-13.109C42 69 42 69 43.875 66c4.404-2.819 8.03-2.766 13.125-2Zm-11 6c-.92 1.86-.92 1.86-1 4 2.827 5.528 8.102 11.205 13 15h3V70c-8.34-3.707-8.34-3.707-15 0Z"/><path fill="#434040" d="M124 55c4.836 4.443 6.184 10.004 6.5 16.375-.446 12-8.663 19.474-16.5 27.625a393.48 393.48 0 0 0-4.125 4.625l-1.633 1.852c-1.331 1.519-1.331 1.519-2.242 3.523-2.875.125-2.875.125-6 0l-2-2 2.247-2.168c2.77-2.678 5.522-5.373 8.27-8.074 1.187-1.162 2.379-2.32 3.576-3.473a622.243 622.243 0 0 0 5.145-5.035l1.61-1.532c4.505-4.501 6.714-9.214 7.515-15.624C126.252 65.41 125.645 60.45 124 55Z"/><path fill="#706D6D" d="M46 46a99.69 99.69 0 0 1-6.367 3.008c-7.31 3.256-11.108 7.157-14.781 14.191-1.188 3.906-1.065 7.558-.977 11.614l.027 2.388c.024 1.933.06 3.866.098 5.799-3.88-3.63-3.9-6.503-4.25-11.75.16-7.741 2.86-13.897 8.156-19.52C33.045 47.483 39.33 45.298 46 46Z"/><path fill="#7A7776" d="M69 15h12l-1 2h-9v10H61v9h-1V25h9V15Z"/></svg>',
  };

  // Similar idea to how the position generation works
  let index = FetchIndexFromCoordinate("a8");

  for (let i = 0; i < RANK_COUNT; i++) {
    for (let j = 0; j < FILE_COUNT; j++) {
      const tile = document.createElement("div");

      // Ensure colours are alternating
      const tileColor = (i + j) % 2 === 0 ? "bg-[#EEEED2]" : "bg-[#769656]";

      tile.classList.add("grid", "place-items-center", "size-24", tileColor);

      // Ensure each tile has a dataset of its matching board representation index
      tile.dataset.square = index;

      // Check for a piece on the square
      if (pieceMapping[board[index]]) {
        // Add piece svg to the tile
        tile.innerHTML = pieceMapping[board[index]];
      }

      boardElement.appendChild(tile);

      index++;
    }

    index += 2;
  }
};

const IsFriendlyPiece = (piece1, piece2) => {
  const [colour1] = ExtractPieceData(piece1);
  const [colour2] = ExtractPieceData(piece2);

  return colour1 === colour2;
};

const GenerateLegalMoves = (board) => {
  // Each item of this array is an object that represents a piece on the board, which stores the piece, its starting square and an array of its target squares
  const pieces = [];

  // Loop over the board
  for (let i = 0; i < board.length; i++) {
    const tile = board[i];

    // If a tile is not empty and not out of bounds this means it has a piece
    if (tile !== PIECES.empty && tile !== PIECES.outOfBounds) {
      // Get the piece type
      const [pieceColor, pieceType] = ExtractPieceData(tile);

      // Ignore pieces of the opposite color
      if (pieceColor !== colorToMove) continue;

      // Bishops
      if (pieceType === 3)
        pieces.push(GenerateSlidingMoves(board, i, "bishop"));

      // Rooks
      if (pieceType === 4) pieces.push(GenerateSlidingMoves(board, i, "rook"));

      // Queens
      if (pieceType === 5) pieces.push(GenerateSlidingMoves(board, i, "queen"));
    }
  }

  return pieces;
};

const GenerateSlidingMoves = (board, index, pieceType) => {
  // Store different offsets for the sliding pieces
  const offsets = {
    bishop: [11, -11, 9, -9],
    rook: [10, -10, 1, -1],
    queen: [11, -11, 9, -9, 10, -10, 1, -1],
  };

  const startingIndex = index;

  // Generate the object to be returned
  const piece = {
    piece: board[startingIndex],
    startSquare: index,
    targetSquares: [],
  };

  // For every one of the offsets
  for (const offset of offsets[pieceType]) {
    let newIndex = startingIndex;

    // While we are still inside the board
    while (board[newIndex] >= 0) {
      // Add the offset
      newIndex += offset;

      // If out of bounds, break
      if (board[newIndex] === PIECES.outOfBounds) break;

      // If empty, consider it a legal move
      if (board[newIndex] === PIECES.empty) {
        piece.targetSquares.push(newIndex);
        continue;
      }

      // A friendly piece is blocking the movement in this direction so we cannot go any further
      if (IsFriendlyPiece(board[startingIndex], board[newIndex])) break;

      // We would capture an enemy piece and cannot go any further
      if (!IsFriendlyPiece(board[startingIndex], board[newIndex])) {
        piece.targetSquares.push(newIndex);
        break;
      }
    }
  }

  return piece;
};

const VisualizeLegalMoves = (pieceMoves) => {
  // Loop over all the pieces
  for (const piece of pieceMoves) {
    const moves = piece.targetSquares;

    // Loop over all the legal moves
    for (const target of moves) {
      // Find the target square
      const square = document.querySelector(`[data-square="${target}"]`);

      // Give it a random colour
      square.classList.add("bg-[#D36C50]");
    }
  }
};

// Convert FEN to board representation
const board = LoadPositionFromFEN(
  "r1bqk1nr/pp1pppbp/2n3p1/1Bp5/4P3/2N2N2/PPPP1PPP/R1BQK2R",
);

// Given the board representation, display the board
InitalizeGraphicalBoard(board);

// Generate the legal moves in this position
const pieceMoves = GenerateLegalMoves(board);

console.log(pieceMoves);

// Visualize them on the graphical board
VisualizeLegalMoves(pieceMoves);
